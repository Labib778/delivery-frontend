<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Taqwa Home Delivery</title>
<style>
    body { font-family: Arial, sans-serif; margin:0; padding:0; }
    header { background:#007BFF; color:#fff; padding:1em; display:flex; justify-content:space-between; align-items:center; }
    nav { display:flex; gap:1em; }
    nav a { color:#fff; text-decoration:none; cursor:pointer; }
    .menu-toggle { display:none; cursor:pointer; }
    .app-section { display:none; padding:2em; }
    .app-section.active { display:block; }
    input, button { padding:0.5em; margin:0.5em 0; width:100%; max-width:300px; }
    .checkout-item { display:flex; justify-content:space-between; margin-bottom:0.5em; }
    .chat-bubble { padding:0.5em; border-radius:5px; margin-bottom:0.5em; max-width:60%; }
    .user-bubble { background:#DCF8C6; align-self:flex-end; }
    .agent-bubble { background:#EEE; align-self:flex-start; }
    .chat-container { display:flex; flex-direction:column; gap:0.5em; margin-top:1em; }
</style>
</head>
<body>

<header>
    <h1>Taqwa Home Delivery</h1>
    <div class="menu-toggle" onclick="toggleMenu()">â˜°</div>
    <nav id="menu">
        <a onclick="showSection('dashboard-section')">Dashboard</a>
        <a onclick="showSection('checkout-section')">Checkout</a>
        <a onclick="showSection('orders-section')">Orders</a>
        <a onclick="showSection('user-profile-section')">Profile</a>
        <a onclick="showSection('customer-support-section')">Support</a>
        <a onclick="logout()">Logout</a>
    </nav>
</header>

<!-- Sections -->
<section id="login-section" class="app-section active">
    <h2>Login</h2>
    <input type="email" id="login-email" placeholder="Email">
    <input type="password" id="login-password" placeholder="Password">
    <button onclick="login()">Login</button>
    <p>Don't have an account? <a onclick="showSection('register-section')">Register</a></p>
</section>

<section id="register-section" class="app-section">
    <h2>Register</h2>
    <input type="text" id="register-name" placeholder="Full Name">
    <input type="email" id="register-email" placeholder="Email">
    <input type="password" id="register-password" placeholder="Password">
    <input type="text" id="register-phone" placeholder="Phone">
    <input type="text" id="register-address" placeholder="Address">
    <button onclick="register()">Register</button>
    <p>Already have an account? <a onclick="showSection('login-section')">Login</a></p>
</section>

<section id="verification-section" class="app-section">
    <h2>Verify Code</h2>
    <div>
        <input type="text" maxlength="1" oninput="moveToNext(this, 'code2')" id="code1">
        <input type="text" maxlength="1" oninput="moveToNext(this, 'code3')" id="code2">
        <input type="text" maxlength="1" oninput="moveToNext(this, 'code4')" id="code3">
        <input type="text" maxlength="1" oninput="verifyCode()" id="code4">
    </div>
</section>

<section id="dashboard-section" class="app-section">
    <h2>Place Order</h2>
    <input type="text" id="product-name" placeholder="Product Name">
    <input type="number" id="product-quantity" placeholder="Quantity">
    <input type="text" id="product-address" placeholder="Delivery Address">
    <input type="text" id="product-phone" placeholder="Phone Number">
    <button onclick="placeOrder()">Add to Checkout</button>
</section>

<section id="checkout-section" class="app-section">
    <h2>Checkout</h2>
    <div id="checkout-items"></div>
    <p>Subtotal: <span id="subtotal">0</span></p>
    <p>Delivery Fee: <span id="delivery-fee">50</span></p>
    <p>Total: <span id="total">0</span></p>
    <button onclick="confirmOrder()">Confirm Order</button>
</section>

<section id="orders-section" class="app-section">
    <h2>Your Orders</h2>
    <div id="orders-list"></div>
</section>

<section id="user-profile-section" class="app-section">
    <h2>Profile</h2>
    <input type="text" id="profile-name" placeholder="Name">
    <input type="email" id="profile-email" placeholder="Email">
    <input type="text" id="profile-phone" placeholder="Phone">
    <input type="text" id="profile-address" placeholder="Address">
    <button onclick="updateProfile()">Update Profile</button>
</section>

<section id="customer-support-section" class="app-section">
    <h2>Support</h2>
    <div class="chat-container" id="chat-container"></div>
    <input type="text" id="chat-input" placeholder="Type your message">
    <button onclick="sendMessage()">Send</button>
</section>

<script>
let menuContent = document.getElementById("menu");

function toggleMenu() {
    menuContent.classList.toggle("show");
}

// Section switching
function showSection(sectionId) {
    document.querySelectorAll('.app-section').forEach(section => section.classList.remove('active'));
    document.getElementById(sectionId).classList.add('active');
    menuContent.classList.remove("show");

    if(sectionId === 'dashboard-section') clearOrderForm();
    else if(sectionId === 'checkout-section') populateCheckoutPage();
    else if(sectionId === 'orders-section') loadOrders();
    else if(sectionId === 'user-profile-section') loadUserProfile();
}

// Auth Functions
function register() {
    let name = document.getElementById('register-name').value;
    let email = document.getElementById('register-email').value;
    let password = document.getElementById('register-password').value;
    let phone = document.getElementById('register-phone').value;
    let address = document.getElementById('register-address').value;
    localStorage.setItem('token', 'dummyToken');
    localStorage.setItem('name', name);
    localStorage.setItem('email', email);
    localStorage.setItem('phone', phone);
    localStorage.setItem('address', address);
    showSection('dashboard-section');
}

function login() {
    let email = document.getElementById('login-email').value;
    let password = document.getElementById('login-password').value;
    if(email && password) {
        localStorage.setItem('token', 'dummyToken');
        showSection('dashboard-section');
    }
}

function logout() {
    localStorage.clear();
    showSection('login-section');
}

// Verification
function moveToNext(current, nextId) {
    if(current.value.length >= 1) document.getElementById(nextId).focus();
}
function verifyCode() { showSection('dashboard-section'); }

// Orders
let currentOrderDetails = [];

function placeOrder() {
    let product = document.getElementById('product-name').value;
    let quantity = parseInt(document.getElementById('product-quantity').value);
    let address = document.getElementById('product-address').value;
    let phone = document.getElementById('product-phone').value;
    if(!product || !quantity || !address || !phone) { alert('Fill all fields'); return; }
    currentOrderDetails.push({product, quantity, address, phone});
    alert('Added to checkout');
    clearOrderForm();
}

function clearOrderForm() {
    document.getElementById('product-name').value = '';
    document.getElementById('product-quantity').value = '';
    document.getElementById('product-address').value = '';
    document.getElementById('product-phone').value = '';
}

// Checkout
function populateCheckoutPage() {
    let container = document.getElementById('checkout-items');
    container.innerHTML = '';
    let subtotal = 0;
    currentOrderDetails.forEach(item => {
        let div = document.createElement('div');
        div.className = 'checkout-item';
        div.textContent = `${item.product} x${item.quantity}`;
        container.appendChild(div);
        subtotal += item.quantity * 100; // Assume price 100 per item
    });
    document.getElementById('subtotal').textContent = subtotal;
    document.getElementById('total').textContent = subtotal + 50;
}

function confirmOrder() {
    if(currentOrderDetails.length === 0) { alert('No items'); return; }
    let orders = JSON.parse(localStorage.getItem('orders') || '[]');
    orders.push(...currentOrderDetails);
    localStorage.setItem('orders', JSON.stringify(orders));
    currentOrderDetails = [];
    alert('Order confirmed');
    populateCheckoutPage();
}

// Orders List
function loadOrders() {
    let orders = JSON.parse(localStorage.getItem('orders') || '[]');
    let container = document.getElementById('orders-list');
    container.innerHTML = '';
    orders.forEach((o, idx) => {
        let div = document.createElement('div');
        div.textContent = `${o.product} x${o.quantity} to ${o.address}`;
        container.appendChild(div);
    });
}

// Profile
function loadUserProfile() {
    document.getElementById('profile-name').value = localStorage.getItem('name') || '';
    document.getElementById('profile-email').value = localStorage.getItem('email') || '';
    document.getElementById('profile-phone').value = localStorage.getItem('phone') || '';
    document.getElementById('profile-address').value = localStorage.getItem('address') || '';
}

function updateProfile() {
    localStorage.setItem('name', document.getElementById('profile-name').value);
    localStorage.setItem('email', document.getElementById('profile-email').value);
    localStorage.setItem('phone', document.getElementById('profile-phone').value);
    localStorage.setItem('address', document.getElementById('profile-address').value);
    alert('Profile updated');
}

// Chat
function sendMessage() {
    let input = document.getElementById('chat-input');
    let message = input.value.trim();
    if(!message) return;
    addChatBubble(message, 'user');
    input.value = '';
    setTimeout(() => addChatBubble('We received your message.', 'agent'), 500);
}

function addChatBubble(msg, type) {
    let container = document.getElementById('chat-container');
    let div = document.createElement('div');
    div.className = 'chat-bubble ' + (type === 'user' ? 'user-bubble' : 'agent-bubble');
    div.textContent = msg;
    container.appendChild(div);
    container.scrollTop = container.scrollHeight;
}

// Auto-login if token exists
document.addEventListener('DOMContentLoaded', () => {
    if(localStorage.getItem('token')) showSection('dashboard-section');
});
</script>

</body>
</html>
